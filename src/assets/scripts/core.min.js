(()=>{function e(e,t,n,i){return e.add({targets:t,strokeDashoffset:[anime.setDashoffset,0],duration:n,delay:anime.stagger(150)},i),e}function t(e,t,n,i){return e.add({targets:t,strokeDashoffset:[0,anime.setDashoffset],duration:n,delay:anime.stagger(150)},i),e}function n(e,t){if(window.config.isMobile){let n=300;window.config.prefersReducedMotion&&(n=0);let i=anime.timeline({easing:"easeInOutCirc"});i.add({targets:e,opacity:[1,0],duration:n,complete:n=>{e.innerHTML=t}}),i.add({targets:e,opacity:[0,1],duration:n})}else e.innerHTML=t}function i(e,t,n,i){let a=[...t.getElementsByClassName("item")].slice(0,5),r=t.getElementsByClassName("menu-card-description-text");return e.add({targets:a,opacity:[0,1],translateY:[10,0],duration:n,delay:anime.stagger(150)},i),e.add({targets:r,opacity:[0,1],duration:n},i),e}function a(e,t,n,i){return e.add({targets:t.querySelector("ul"),opacity:[1,0],translateY:[0,10],duration:n},i),e.add({targets:t.getElementsByClassName("menu-card-description-text"),opacity:[1,0],duration:n},i),e}function r(e){let t=e.querySelector("ul");t.style.opacity=1,t.style.transform="translateY(0px)",e.scrollTop=0}var s={start(){this.ui={toggleButton:document.getElementById("menu-button"),mainMenuItems:document.getElementById("main-menu").getElementsByClassName("item"),crosses:document.getElementById("nav").getElementsByClassName("svg-cross"),mainMenuCard:document.getElementById("main-menu"),categoriesCard:document.getElementById("categories-card"),themesCard:document.getElementById("themes-card"),informationsCard:document.getElementById("informations-card"),currentCard:void 0},this.state={cardOpen:!1,firstOpen:!0},this.setListeners()},setListeners(){this.ui.toggleButton.addEventListener("click",d);for(let e of this.ui.mainMenuItems)e.addEventListener("click",o);for(let e of this.ui.crosses)e.addEventListener("click",c);document.getElementsByTagName("main")[0].addEventListener("click",c),window.addEventListener("pageLeave",(function(e){c()}))}};function o(e){if(s.state.cardOpen){let t=e.target.id;t+"-card"===s.ui.currentCard.id||e.target.classList.contains("ignore-click")?c(e):u(s.ui[t+"Card"])}else e.target.classList.contains("ignore-click")||l(e)}function d(e){s.state.cardOpen?c(e):l(e)}function l(t){s.state.firstOpen&&(s.ui.mainMenuCard.style.display="grid",s.ui.categoriesCard.style.display="grid",s.ui.themesCard.style.display="grid",s.ui.informationsCard.style.display="grid",s.state.firstOpen=!1);let n=t.target;"menu-button"===n.id?s.ui.currentCard=s.ui.mainMenuCard:s.ui.currentCard=s.ui[n.id+"Card"],s.state.cardOpen=!0,m(!1),function(t){let n=300;window.config.prefersReducedMotion&&(n=0);let a=anime.timeline({easing:"easeInOutCirc"});a.add({targets:t,translateX:["100%","0%"],duration:n}),a=i(a,t,n,n),a=e(a,t.querySelectorAll(".svg-cross path"),n,n)}(s.ui.currentCard),n.setAttribute("aria-expanded","true")}function c(e){if(!s.ui.currentCard)return;let n=f(s.ui.currentCard);e&&(e.target.classList.contains("svg-cross")||e.target.parentNode.classList.contains("svg-cross"))&&window.config.isMobile?(u(s.ui.mainMenuCard),s.ui.toggleButton.setAttribute("aria-expanded","true"),n.setAttribute("aria-expanded","false")):(!function(e){let n=300;window.config.prefersReducedMotion&&(n=0);let i=anime.timeline({easing:"easeInOutCirc"});i=t(i,e.querySelectorAll(".svg-cross path"),n,0),i=a(i,e,n,n),i.add({targets:e,translateX:["0%","100%"],duration:n,delay:100}),i.finished.then((()=>{r(e)}))}(s.ui.currentCard),s.state.cardOpen=!1,s.ui.currentCard=void 0,n.setAttribute("aria-expanded","false"),m(!0))}function u(n){!function(n,s){let o=300;window.config.prefersReducedMotion&&(o=0);let d=anime.timeline({easing:"easeInOutCirc"});var l;d=a(d,n,o,0),window.config.isMobile&&(d=t(d,n.querySelectorAll(".svg-cross path"),o,0)),(l=s).style.background="none",l.style.boxShadow="none",l.style.zIndex="1000",l.style.transform="translateX(0%)",0!=n.scrollTop&&(d=t(d,n.querySelectorAll(".svg-cross path"),o,0)),d=e(d,s.querySelectorAll(".svg-cross path"),o,0),d=i(d,s,o,o),d.finished.then((()=>{!function(e,t){t.style.boxShadow="-4px 4px 4px rgba(0, 0, 0, 0.25)",t.style.background="#1f1f1f",e.style.transform="translateX(100%)",t.style.zIndex=999,e.style.height="",e.style.overflow=""}(n,s),r(n)}))}(s.ui.currentCard,n),"main-menu"===s.ui.currentCard.id?s.ui.toggleButton.setAttribute("aria-expanded","false"):f(s.ui.currentCard).setAttribute("aria-expanded","false"),"main-menu"===n.id?s.ui.toggleButton.setAttribute("aria-expanded","true"):f(n).setAttribute("aria-expanded","true"),s.ui.currentCard=n}function m(e){n(s.ui.toggleButton,e?"menu":"fermer")}function g(e){if(e)s.ui.mainMenuCard.style.transform="translateX(100%)";else{s.ui.mainMenuCard.style.transform="translateX(0%)",s.ui.mainMenuCard.style.boxShadow="",s.state.cardOpen&&s.ui.currentCard==s.ui.mainMenuCard&&(s.state.cardOpen=!1,s.ui.currentCard=void 0);for(let e of s.ui.mainMenuItems)e.style.opacity=1,e.style.transform="translateY(0)"}}function f(e){let t=e.id.replace("-card","");return document.getElementById(t)}function p(){let e=[].slice.call(document.querySelectorAll(".lazy-base64")),t=[].slice.call(document.querySelectorAll(".lazy canvas"));var n;n=t,function(e){e.forEach((function(e){var t=e.nextElementSibling,n=t.getContext("2d"),i=new Image;i.src=e.src,i.onload=function(){n.drawImage(i,0,0,t.width,t.height)}}))}(e),y(n),y([].slice.call(document.querySelectorAll(".lazy-embed .video-icon")))}function y(e){let t=new IntersectionObserver((function(e,n){for(let n of e)if(n.isIntersecting){let e=n.target;h(e),t.unobserve(e)}}),{threshold:.2});for(let n of e)t.observe(n)}function h(e){let t=e.parentElement.classList;t.contains("lazy-img")?function(e){let t=e.nextElementSibling;t.addEventListener("load",w(t)),t.sizes=t.dataset.sizes?t.dataset.sizes:"",t.srcset=t.dataset.srcset?t.dataset.srcset:t.dataset.src}(e):t.contains("lazy-div")?function(e){let t=e.nextElementSibling;var n=new Image;n.onload=function(){t.style.backgroundImage="url("+t.dataset.src+")",w(t),n=void 0},n.src=t.dataset.src}(e):t.contains("lazy-video")?function(e){let t=e.nextElementSibling,n=t.firstElementChild;n.src=n.dataset.src,t.load(),w(t)}(e):t.contains("lazy-iframe")&&function(e){let t=e.nextElementSibling;t.src=t.dataset.src,w(t)}(e)}function w(e){window.setTimeout((function(){e.classList.add("fadein")}),100)}function v(){barba.hooks.leave((({current:e,next:t,trigger:n})=>(dispatchEvent(new Event("pageLeave")),new Promise((t=>{(e.container,new Promise((e=>{let t=400;window.config.prefersReducedMotion&&(t=0);let n=document.getElementById("tr-main");n.style.display="initial",n.style.opacity=1,anime({targets:n,easing:"easeInOutCirc",translateY:["100%","0%"],duration:t,complete:()=>{let t=document.getElementsByTagName("html")[0];t.classList.remove("smooth-scroll"),document.body.scrollTop=0,document.documentElement.scrollTop=0,t.classList.add("smooth-scroll"),e()}})}))).then((()=>{t()}))}))))),barba.hooks.enter((({current:e,next:t,trigger:n})=>new Promise((e=>{window.scrollTo(0,0),function(e){js_assets[e]&&function(e){let t="js-"+e;if(!document.getElementsByClassName(t)[0]){let n=document.createElement("script");n.src=js_assets[e],n.classList.add(t),document.head.appendChild(n)}}(e);css_assets[e]&&function(e){let t="css-"+e;if(!document.getElementsByClassName(t)[0]){let n=document.createElement("link");n.href=css_assets[e],n.type="text/css",n.rel="stylesheet",n.classList.add(t),document.head.appendChild(n)}}(e)}(t.namespace),e()})))),barba.init({debug:!0,timeout:4e3,transitions:[{name:"default",leave(e){},after:({current:e,next:t,trigger:n})=>new Promise((e=>{dispatchEvent(new Event("pageLoad")),(t.container,new Promise((e=>{let t=500;window.config.prefersReducedMotion&&(t=0);let n=anime.timeline({easing:"easeInOutCirc"}),i=document.getElementById("tr-main");n.add({targets:i,translateY:["0%","-100%"],duration:t,complete:()=>{i.style.display="none",e()}})}))).then((()=>{e(),function(e){if(e&&document.getElementById(e)){let t=document.getElementsByTagName("html")[0];t.classList.remove("smooth-scroll"),document.getElementById(e).scrollIntoView(),t.classList.add("smooth-scroll")}}(t.url.hash)}))}))}]})}function C(){let e=document.getElementsByClassName("card-with-icon");for(let t of e)t.addEventListener("mouseenter",E)}function E(n){let i=600;window.config.prefersReducedMotion&&(i=0);let a=anime.timeline({easing:"easeInOutCirc"}),r=n.target.firstElementChild.getElementsByClassName("svg-anim");a=t(a,r,i,0),a=e(a,r,i,i)}function b(){let e={};return e.width=document.body.clientWidth||document.documentElement.offsetWidth||window.innerWidth,e.windowHeight=window.innerHeight||document.body.clientHeight||document.documentElement.offsetHeight,e.scrollHeight=document.body.scrollHeight,e.isMobile=e.width<1200,e.prefersReducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)").matches,window.config=e,e}function x(){var e=document.createElement("div");e.style.padding="100px 25px 25px 25px";var t=document.createElement("h1");t.innerHTML="Arrêtez de surfer avec votre tamagochi !",e.appendChild(t);var n=document.createElement("p");n.innerHTML="Votre navigateur ne supporte pas une ou plusieurs des fonctionnalités nécessaires au bon fonctionnement de ce magnifique et inoubliable site internet.",e.appendChild(n);var i=document.createElement("p");i.innerHTML='Pour une navigation sans vague, il est conseillé de télécharger la dernière version de <a href="https://www.mozilla.org/fr/firefox/new/" rel="noopener">Firefox</a> ou <a href="https://www.google.com/intl/fr/chrome/" rel="noopener">Chrome</a>.',e.appendChild(i);var a=document.createElement("p");a.innerHTML="Par ailleurs, il est fortement encouragé d'installer les dernières versions des navigateurs pour des raisons de sécurité.",e.appendChild(a);var r=document.createElement("p");r.innerHTML='Si vous utilisez déjà la dernière version de Firefox ou Chrome, et que vous voyez quand même ce message, merci de bien vouloir insul... contacter l\'incompétent développeur responsable via Twitter : <a href="https://twitter.com/artboratoire/">https://twitter.com/artboratoire/</a>.',e.appendChild(r),document.body.insertBefore(e,document.getElementById("barba-wrapper")),document.body.style.overflow="auto"}window.addEventListener("load",(function(e){window.CSS?window.CSS.supports("display","grid")&&window.CSS.supports("grid-template-columns: 60px 1fr 60px")&&window.CSS.supports("position","fixed")&&window.CSS.supports("height: calc(100vh - 75px)")?"undefined"==typeof Promise&&-1==Promise.toString().indexOf("[native code]")&&(console.error("[JAVASCRIPT] Promises : NOT supported"),x()):(console.error("[CSS] display:grid, grid-template-X, position:fixed, calc(vh): one or more NOT supported"),x()):x(),b(),s.start(),function(){let e;function t(){let t=window.config.width;e||(e=setTimeout((function(){e=null;let n=b().width;t>=1200&&n<1200&&(g(!0),t=n),t<1200&&n>=1200&&(g(!1),t=n)}),66))}window.addEventListener("resize",t,!1),window.addEventListener("orientationchange",t,!1)}(),v(),p(),C()})),window.addEventListener("pageLoad",(function(e){p(),C()}))})();